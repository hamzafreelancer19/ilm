{"ast":null,"code":"var _jsxFileName = \"/home/shahzad/Desktop/Book_Project/ilm-kademy-frontend/src/pages/library/ChapterViewerPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { ChevronLeftIcon, ChevronRightIcon, BookOpenIcon, CheckCircleIcon, PlayIcon, PauseIcon, SpeakerWaveIcon, SpeakerXMarkIcon, DocumentTextIcon, AcademicCapIcon, LightBulbIcon } from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { API_ENDPOINTS } from '../../config/api';\nimport ChapterSections from '../../components/library/ChapterSections';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChapterViewerPage = () => {\n  _s();\n  var _chapter$sections, _chapter$sections2, _chapter$sections3;\n  const {\n    bookId,\n    chapterId\n  } = useParams();\n  const navigate = useNavigate();\n  const [book, setBook] = useState(null);\n  const [chapter, setChapter] = useState(null);\n  const [chapters, setChapters] = useState([]);\n  const [currentSection, setCurrentSection] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const [showNotes, setShowNotes] = useState(false);\n  const [userNotes, setUserNotes] = useState('');\n  const [completedSections, setCompletedSections] = useState([]);\n  useEffect(() => {\n    fetchBookAndChapter();\n  }, [bookId, chapterId]);\n  const fetchBookAndChapter = async () => {\n    try {\n      // Get auth token from localStorage\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (tokens.access) {\n        headers['Authorization'] = `Bearer ${tokens.access}`;\n      }\n      const [bookResponse, chapterResponse, chaptersResponse] = await Promise.all([fetch(`${API_ENDPOINTS.BOOKS}${bookId}/`, {\n        headers\n      }), fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/${chapterId}/`, {\n        headers\n      }), fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/`, {\n        headers\n      })]);\n      if (bookResponse.ok) {\n        const bookData = await bookResponse.json();\n        setBook(bookData);\n      } else if (bookResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock book data due to authentication required');\n\n        // Dynamic mock book data based on book ID\n        const mockBookData = {\n          1: {\n            id: bookId,\n            title: 'English Grammar Fundamentals',\n            author: 'Dr. Sarah Johnson'\n          },\n          2: {\n            id: bookId,\n            title: 'Advanced English Composition',\n            author: 'Prof. Michael Chen'\n          },\n          11: {\n            id: bookId,\n            title: 'Master English: Complete Language Course',\n            author: 'Dr. Emily Rodriguez'\n          }\n        };\n        const bookData = mockBookData[parseInt(bookId)] || mockBookData[1];\n        setBook(bookData);\n      }\n      if (chapterResponse.ok) {\n        const chapterData = await chapterResponse.json();\n        setChapter(chapterData);\n\n        // If this is an English book, fetch the detailed sections\n        if (chapterData.book_title && chapterData.sections) {\n          // Set completed sections from reading progress if available\n          if (chapterData.reading_progress) {\n            setCompletedSections(chapterData.reading_progress.completed_sections || []);\n          }\n        }\n      } else if (chapterResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapter data due to authentication required');\n\n        // Dynamic mock chapter data based on book ID and chapter ID\n        const mockChapterData = {\n          1: {\n            // Book ID 1 - English Grammar Fundamentals\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'Basic Grammar Concepts',\n              description: 'Introduction to parts of speech and sentence structure in English.',\n              sections: [{\n                id: 1,\n                kind: 'INTRODUCTION',\n                title: 'Introduction to Grammar',\n                content: {\n                  text: 'Welcome to Basic Grammar Concepts. This chapter will introduce you to the fundamental building blocks of English grammar.',\n                  overview: 'Learn the essential grammar concepts that form the foundation of English language.',\n                  key_concepts: ['Parts of speech', 'Sentence structure', 'Basic rules', 'Common patterns']\n                }\n              }, {\n                id: 2,\n                kind: 'POINT_WISE_SUMMARY',\n                title: 'Point-wise Summary',\n                content: {\n                  points: ['Understanding parts of speech', 'Learning sentence structure', 'Mastering basic grammar rules', 'Building vocabulary foundation'],\n                  main_ideas: ['Grammar fundamentals', 'Language structure', 'Basic patterns']\n                }\n              }, {\n                id: 3,\n                kind: 'SLOS',\n                title: 'Student Learning Objectives',\n                content: {\n                  objectives: ['Identify different parts of speech', 'Understand basic sentence structure', 'Apply grammar rules correctly', 'Build confidence in English'],\n                  outcomes: ['Knowledge of grammar', 'Improved writing', 'Better communication']\n                }\n              }, {\n                id: 4,\n                kind: 'PRE_READING_QUESTIONS',\n                title: 'Pre-reading Questions',\n                content: {\n                  questions: ['What do you know about English grammar?', 'How do you think grammar helps in communication?', 'What grammar concepts do you find challenging?'],\n                  purpose: 'These questions help prepare your mind for learning grammar concepts.'\n                }\n              }, {\n                id: 5,\n                kind: 'VOCABULARY_TEXT_TRANSLATION',\n                title: 'Vocabulary, Text & Translation',\n                content: {\n                  vocabulary: {\n                    'grammar': 'The rules and structure of a language',\n                    'sentence': 'A group of words that express a complete thought',\n                    'structure': 'The way something is organized or arranged'\n                  },\n                  text: 'This section covers essential grammar concepts with examples and explanations.',\n                  translation: 'Key terms will be explained in simple language for better understanding.'\n                }\n              }, {\n                id: 6,\n                kind: 'GLOSSARY',\n                title: 'Glossary',\n                content: {\n                  terms: {\n                    'grammar': 'The rules and structure of a language',\n                    'sentence': 'A group of words that express a complete thought',\n                    'structure': 'The way something is organized or arranged'\n                  },\n                  definitions: {\n                    'grammar': 'The system of rules that govern how words are used in a language',\n                    'sentence': 'A grammatical unit that contains a subject and predicate',\n                    'structure': 'The arrangement of and relations between the parts of something'\n                  }\n                }\n              }, {\n                id: 7,\n                kind: 'EXERCISE_SHORT_QUESTIONS',\n                title: 'Exercise: Short Questions',\n                content: {\n                  questions: ['What are the main parts of speech?', 'How does sentence structure work?', 'Why is grammar important?'],\n                  answers: {\n                    'What are the main parts of speech?': 'Nouns, verbs, adjectives, adverbs, pronouns, prepositions, conjunctions, interjections',\n                    'How does sentence structure work?': 'A sentence typically has a subject and predicate',\n                    'Why is grammar important?': 'Grammar helps us communicate clearly and effectively'\n                  }\n                }\n              }, {\n                id: 8,\n                kind: 'EXERCISE_OBJECTIVES',\n                title: 'Exercise: Objectives',\n                content: {\n                  questions: [{\n                    question: 'Which of the following is NOT a part of speech?',\n                    options: ['Noun', 'Verb', 'Sentence', 'Adjective'],\n                    correct_answer: 'Sentence'\n                  }, {\n                    question: 'True or False: Grammar is not important for communication.',\n                    options: ['True', 'False'],\n                    correct_answer: 'False'\n                  }],\n                  options: {},\n                  correct_answers: {}\n                }\n              }, {\n                id: 9,\n                kind: 'EXERCISE_VOCABULARY_GRAMMAR',\n                title: 'Exercise: Vocabulary and Grammar',\n                content: {\n                  vocabulary_exercises: ['Match words with their definitions', 'Fill in the blanks with correct words', 'Identify parts of speech'],\n                  grammar_exercises: ['Correct grammar errors', 'Complete sentences', 'Identify sentence structure']\n                }\n              }, {\n                id: 10,\n                kind: 'EXERCISE_ORAL_COMMUNICATION',\n                title: 'Exercise: Oral Communication',\n                content: {\n                  speaking_activities: ['Practice pronunciation of grammar terms', 'Discuss grammar concepts with classmates', 'Explain grammar rules to others'],\n                  discussion_topics: ['How does grammar help in speaking?', 'What grammar mistakes do you commonly make?', 'How can we improve our grammar?']\n                }\n              }, {\n                id: 11,\n                kind: 'EXERCISE_WRITING_SKILLS',\n                title: 'Exercise: Writing Skills',\n                content: {\n                  writing_prompts: ['Write about your experience learning grammar', 'Create sentences using different parts of speech', 'Explain a grammar rule in your own words'],\n                  writing_tasks: ['Grammar practice exercises', 'Sentence construction practice', 'Grammar rule explanations']\n                }\n              }, {\n                id: 12,\n                kind: 'IDIOMS_PHRASAL_VERBS',\n                title: 'Idioms and Phrasal Verbs of the Lesson',\n                content: {\n                  idioms: {\n                    'get the hang of': 'To learn how to do something',\n                    'piece of cake': 'Something very easy',\n                    'hit the books': 'To study hard'\n                  },\n                  phrasal_verbs: {\n                    'look up': 'To search for information',\n                    'figure out': 'To understand or solve',\n                    'catch on': 'To understand or learn'\n                  }\n                }\n              }, {\n                id: 13,\n                kind: 'ASSESSMENT_TEST',\n                title: 'Assessment Test',\n                content: {\n                  questions: [{\n                    question: 'What is the main purpose of this chapter?',\n                    type: 'multiple_choice',\n                    options: ['To memorize vocabulary', 'To understand grammar basics', 'To pass an exam', 'To complete homework'],\n                    correct_answer: 'To understand grammar basics',\n                    marks: 10\n                  }, {\n                    question: 'Explain how grammar helps in communication.',\n                    type: 'short_answer',\n                    marks: 15\n                  }],\n                  time_limit: '30 minutes',\n                  total_marks: 100\n                }\n              }]\n            }\n          },\n          2: {\n            // Book ID 2 - Advanced English Composition\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'Essay Writing Fundamentals',\n              description: 'Learn the basics of essay structure and organization.',\n              sections: [\n              // Similar structure with 13 sections for essay writing\n              {\n                id: 1,\n                kind: 'INTRODUCTION',\n                title: 'Introduction to Essay Writing',\n                content: {\n                  text: 'Welcome to Essay Writing Fundamentals. This chapter will teach you how to write clear, organized essays.',\n                  overview: 'Learn the essential elements of essay writing and structure.',\n                  key_concepts: ['Essay structure', 'Organization', 'Clear writing', 'Logical flow']\n                }\n              }\n              // ... other 12 sections would be added here\n              ]\n            }\n          },\n          11: {\n            // Book ID 11 - Master English: Complete Language Course\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'English Fundamentals: Building Strong Foundations',\n              description: 'Master the basics of English grammar and vocabulary.',\n              sections: [\n              // Similar structure with 13 sections for comprehensive English\n              {\n                id: 1,\n                kind: 'INTRODUCTION',\n                title: 'Introduction to English Fundamentals',\n                content: {\n                  text: 'Welcome to English Fundamentals. This comprehensive chapter covers all essential aspects of English language learning.',\n                  overview: 'Build a strong foundation in English with grammar, vocabulary, and communication skills.',\n                  key_concepts: ['Grammar basics', 'Vocabulary building', 'Communication skills', 'Practical application']\n                }\n              }\n              // ... other 12 sections would be added here\n              ]\n            }\n          }\n        };\n\n        // Get the appropriate chapter data based on book ID and chapter ID\n        const bookChapters = mockChapterData[parseInt(bookId)] || {};\n        const chapterData = bookChapters[parseInt(chapterId)] || bookChapters[1] || {\n          id: chapterId,\n          title: 'English Language Learning',\n          description: 'Learn English fundamentals and communication skills.',\n          sections: []\n        };\n        setChapter(chapterData);\n      } else if (chaptersResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapters data due to authentication required');\n\n        // Dynamic mock chapters data based on book ID\n        const mockChaptersData = {\n          1: [\n          // English Grammar Fundamentals\n          {\n            id: 1,\n            title: 'Basic Grammar Concepts',\n            description: 'Introduction to parts of speech and sentence structure',\n            duration: '4 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }, {\n            id: 2,\n            title: 'Essential Vocabulary Building',\n            description: 'Building a strong foundation of English vocabulary',\n            duration: '3 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }],\n          2: [\n          // Advanced English Composition\n          {\n            id: 1,\n            title: 'Essay Writing Fundamentals',\n            description: 'Learn the basics of essay structure and organization',\n            duration: '5 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }, {\n            id: 2,\n            title: 'Advanced Writing Techniques',\n            description: 'Master sophisticated writing styles and techniques',\n            duration: '6 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }],\n          11: [\n          // Master English: Complete Language Course\n          {\n            id: 1,\n            title: 'English Fundamentals: Building Strong Foundations',\n            description: 'Master the basics of English grammar and vocabulary',\n            duration: '6 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }, {\n            id: 2,\n            title: 'Effective Communication: Speaking with Confidence',\n            description: 'Develop your speaking and listening skills',\n            duration: '8 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }, {\n            id: 3,\n            title: 'Advanced Writing: Expressing Ideas Clearly',\n            description: 'Learn to write clearly and persuasively',\n            duration: '10 hours',\n            sections_count: 13,\n            is_completed: false,\n            progress: 0\n          }]\n        };\n\n        // Use the appropriate chapters data based on book ID, or default to first book\n        const chaptersData = mockChaptersData[parseInt(bookId)] || mockChaptersData[1];\n        setChapters(chaptersData);\n      }\n\n      // Mock data for development if no data was loaded\n      if (!book) {\n        const mockBookData = {\n          1: {\n            id: bookId,\n            title: 'English Grammar Fundamentals',\n            author: 'Dr. Sarah Johnson'\n          },\n          2: {\n            id: bookId,\n            title: 'Advanced English Composition',\n            author: 'Prof. Michael Chen'\n          },\n          11: {\n            id: bookId,\n            title: 'Master English: Complete Language Course',\n            author: 'Dr. Emily Rodriguez'\n          }\n        };\n        const bookData = mockBookData[parseInt(bookId)] || mockBookData[1];\n        setBook(bookData);\n      }\n      if (!chapter) {\n        const mockChapterData = {\n          1: {\n            // Book ID 1\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'Basic Grammar Concepts',\n              description: 'Introduction to parts of speech and sentence structure in English.',\n              sections: []\n            }\n          },\n          2: {\n            // Book ID 2\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'Essay Writing Fundamentals',\n              description: 'Learn the basics of essay structure and organization.',\n              sections: []\n            }\n          },\n          11: {\n            // Book ID 11\n            1: {\n              // Chapter 1\n              id: chapterId,\n              title: 'English Fundamentals: Building Strong Foundations',\n              description: 'Master the basics of English grammar and vocabulary.',\n              sections: []\n            }\n          }\n        };\n        const bookChapters = mockChapterData[parseInt(bookId)] || {};\n        const chapterData = bookChapters[parseInt(chapterId)] || bookChapters[1] || {\n          id: chapterId,\n          title: 'English Language Learning',\n          description: 'Learn English fundamentals and communication skills.',\n          sections: []\n        };\n        setChapter(chapterData);\n      }\n      if (chapters.length === 0) {\n        setChapters([{\n          id: 1,\n          title: 'Introduction to Advanced Calculus'\n        }, {\n          id: 2,\n          title: 'Limits and Continuity'\n        }, {\n          id: 3,\n          title: 'Differentiation Techniques'\n        }, {\n          id: 4,\n          title: 'Integration Methods'\n        }]);\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      toast.error('Failed to load chapter content');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const currentChapterIndex = chapters.findIndex(ch => ch.id === parseInt(chapterId));\n  const hasPreviousChapter = currentChapterIndex > 0;\n  const hasNextChapter = currentChapterIndex < chapters.length - 1;\n  const navigateToChapter = direction => {\n    if (direction === 'prev' && hasPreviousChapter) {\n      const prevChapter = chapters[currentChapterIndex - 1];\n      navigate(`/app/library/${bookId}/chapter/${prevChapter.id}`);\n    } else if (direction === 'next' && hasNextChapter) {\n      const nextChapter = chapters[currentChapterIndex + 1];\n      navigate(`/app/library/${bookId}/chapter/${nextChapter.id}`);\n    }\n  };\n  const handleSectionComplete = (sectionId, sectionIndex) => {\n    // Add section to completed sections\n    if (!completedSections.includes(sectionId)) {\n      setCompletedSections(prev => [...prev, sectionId]);\n\n      // Progress is now calculated dynamically from completedSections\n\n      // Auto-expand next section if available\n      if (sectionIndex < chapter.sections.length - 1) {\n        setCurrentSection(sectionIndex + 1);\n      }\n      toast.success('Section completed!');\n    }\n  };\n  const toggleAudio = () => {\n    setIsPlaying(!isPlaying);\n    // TODO: Implement actual audio playback\n    toast.success(isPlaying ? 'Audio paused' : 'Audio playing');\n  };\n  const toggleMute = () => {\n    setIsMuted(!isMuted);\n    // TODO: Implement actual mute functionality\n    toast.success(isMuted ? 'Audio unmuted' : 'Audio muted');\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: \"Loading chapter...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this);\n  }\n  if (!chapter || !book) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(BookOpenIcon, {\n          className: \"mx-auto h-12 w-12 text-gray-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-2 text-sm font-medium text-gray-900\",\n          children: \"Chapter not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-gray-500\",\n          children: \"The chapter you're looking for doesn't exist.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/app/library/${bookId}`,\n              className: \"text-indigo-600 hover:text-indigo-500 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(ChevronLeftIcon, {\n                className: \"h-5 w-5 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 17\n              }, this), \"Back to Book\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-400\",\n              children: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: chapter.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleAudio,\n              className: \"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(PauseIcon, {\n                className: \"h-5 w-5 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(PlayIcon, {\n                className: \"h-5 w-5 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleMute,\n              className: \"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\",\n              children: isMuted ? /*#__PURE__*/_jsxDEV(SpeakerXMarkIcon, {\n                className: \"h-5 w-5 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(SpeakerWaveIcon, {\n                className: \"h-5 w-5 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-4 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-2xl font-bold text-gray-900 mb-2\",\n                  children: chapter.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-600\",\n                  children: chapter.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-right\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-indigo-600\",\n                  children: [Math.round(completedSections.length / (((_chapter$sections = chapter.sections) === null || _chapter$sections === void 0 ? void 0 : _chapter$sections.length) || 1) * 100), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 667,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-200 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-indigo-600 h-2 rounded-full transition-all duration-300\",\n                style: {\n                  width: `${completedSections.length / (((_chapter$sections2 = chapter.sections) === null || _chapter$sections2 === void 0 ? void 0 : _chapter$sections2.length) || 1) * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",\n            children: /*#__PURE__*/_jsxDEV(ChapterSections, {\n              sections: chapter.sections || [],\n              onSectionComplete: handleSectionComplete,\n              completedSections: completedSections\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigateToChapter('prev'),\n              disabled: !hasPreviousChapter,\n              className: \"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: [/*#__PURE__*/_jsxDEV(ChevronLeftIcon, {\n                className: \"h-5 w-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 17\n              }, this), \"Previous Chapter\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => navigateToChapter('next'),\n              disabled: !hasNextChapter,\n              className: \"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: [\"Next Chapter\", /*#__PURE__*/_jsxDEV(ChevronRightIcon, {\n                className: \"h-5 w-5 ml-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900 mb-4\",\n              children: \"Chapter Sections\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: (_chapter$sections3 = chapter.sections) === null || _chapter$sections3 === void 0 ? void 0 : _chapter$sections3.map((section, index) => {\n                const isCompleted = completedSections.includes(section.id);\n                const isCurrent = index === currentSection;\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentSection(index),\n                  className: `w-full text-left p-3 rounded-md transition-colors duration-200 ${isCurrent ? 'bg-indigo-100 text-indigo-700 border border-indigo-200' : isCompleted ? 'bg-green-50 text-green-700 border border-green-200' : 'hover:bg-gray-50 text-gray-700'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium\",\n                      children: section.kind ? section.kind.replace('_', ' ') : section.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 736,\n                      columnNumber: 25\n                    }, this), isCompleted && /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                      className: \"h-5 w-5 text-green-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 740,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center mt-1 text-xs text-gray-500\",\n                    children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n                      className: \"h-4 w-4 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 744,\n                      columnNumber: 25\n                    }, this), \"Section \", index + 1, \" of \", chapter.sections.length]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 743,\n                    columnNumber: 23\n                  }, this)]\n                }, section.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-gray-900\",\n                children: \"My Notes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 756,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowNotes(!showNotes),\n                className: \"text-indigo-600 hover:text-indigo-500 text-sm\",\n                children: showNotes ? 'Hide' : 'Show'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 15\n            }, this), showNotes && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: userNotes,\n                onChange: e => setUserNotes(e.target.value),\n                placeholder: \"Add your notes here...\",\n                className: \"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\",\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"mt-2 w-full bg-indigo-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors duration-200\",\n                children: \"Save Notes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 774,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900 mb-4\",\n              children: \"Quick Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\",\n                children: [/*#__PURE__*/_jsxDEV(LightBulbIcon, {\n                  className: \"h-5 w-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 19\n                }, this), \"Ask AI Assistant\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\",\n                children: [/*#__PURE__*/_jsxDEV(AcademicCapIcon, {\n                  className: \"h-5 w-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 790,\n                  columnNumber: 19\n                }, this), \"Take Quiz\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 789,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 608,\n    columnNumber: 5\n  }, this);\n};\n_s(ChapterViewerPage, \"4w9DuGQGvSQxslC0n6ffIMOyJl0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ChapterViewerPage;\nexport default ChapterViewerPage;\nvar _c;\n$RefreshReg$(_c, \"ChapterViewerPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","ChevronLeftIcon","ChevronRightIcon","BookOpenIcon","CheckCircleIcon","PlayIcon","PauseIcon","SpeakerWaveIcon","SpeakerXMarkIcon","DocumentTextIcon","AcademicCapIcon","LightBulbIcon","toast","API_ENDPOINTS","ChapterSections","jsxDEV","_jsxDEV","ChapterViewerPage","_s","_chapter$sections","_chapter$sections2","_chapter$sections3","bookId","chapterId","navigate","book","setBook","chapter","setChapter","chapters","setChapters","currentSection","setCurrentSection","isLoading","setIsLoading","isPlaying","setIsPlaying","isMuted","setIsMuted","showNotes","setShowNotes","userNotes","setUserNotes","completedSections","setCompletedSections","fetchBookAndChapter","tokens","JSON","parse","localStorage","getItem","headers","access","bookResponse","chapterResponse","chaptersResponse","Promise","all","fetch","BOOKS","ok","bookData","json","status","console","log","mockBookData","id","title","author","parseInt","chapterData","book_title","sections","reading_progress","completed_sections","mockChapterData","description","kind","content","text","overview","key_concepts","points","main_ideas","objectives","outcomes","questions","purpose","vocabulary","translation","terms","definitions","answers","question","options","correct_answer","correct_answers","vocabulary_exercises","grammar_exercises","speaking_activities","discussion_topics","writing_prompts","writing_tasks","idioms","phrasal_verbs","type","marks","time_limit","total_marks","bookChapters","mockChaptersData","duration","sections_count","is_completed","progress","chaptersData","length","error","currentChapterIndex","findIndex","ch","hasPreviousChapter","hasNextChapter","navigateToChapter","direction","prevChapter","nextChapter","handleSectionComplete","sectionId","sectionIndex","includes","prev","success","toggleAudio","toggleMute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","Math","round","style","width","onSectionComplete","disabled","map","section","index","isCompleted","isCurrent","replace","value","onChange","e","target","placeholder","rows","_c","$RefreshReg$"],"sources":["/home/shahzad/Desktop/Book_Project/ilm-kademy-frontend/src/pages/library/ChapterViewerPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { \n  ChevronLeftIcon, \n  ChevronRightIcon, \n  BookOpenIcon,\n  CheckCircleIcon,\n  PlayIcon,\n  PauseIcon,\n  SpeakerWaveIcon,\n  SpeakerXMarkIcon,\n  DocumentTextIcon,\n  AcademicCapIcon,\n  LightBulbIcon\n} from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { API_ENDPOINTS } from '../../config/api';\nimport ChapterSections from '../../components/library/ChapterSections';\n\nconst ChapterViewerPage = () => {\n  const { bookId, chapterId } = useParams();\n  const navigate = useNavigate();\n  const [book, setBook] = useState(null);\n  const [chapter, setChapter] = useState(null);\n  const [chapters, setChapters] = useState([]);\n  const [currentSection, setCurrentSection] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n\n  const [showNotes, setShowNotes] = useState(false);\n  const [userNotes, setUserNotes] = useState('');\n  const [completedSections, setCompletedSections] = useState([]);\n\n  useEffect(() => {\n    fetchBookAndChapter();\n  }, [bookId, chapterId]);\n\n  const fetchBookAndChapter = async () => {\n    try {\n      // Get auth token from localStorage\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n      const headers = {\n        'Content-Type': 'application/json',\n      };\n      \n      if (tokens.access) {\n        headers['Authorization'] = `Bearer ${tokens.access}`;\n      }\n\n      const [bookResponse, chapterResponse, chaptersResponse] = await Promise.all([\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/`, { headers }),\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/${chapterId}/`, { headers }),\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/`, { headers })\n      ]);\n\n      if (bookResponse.ok) {\n        const bookData = await bookResponse.json();\n        setBook(bookData);\n      } else if (bookResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock book data due to authentication required');\n        \n        // Dynamic mock book data based on book ID\n        const mockBookData = {\n          1: {\n            id: bookId,\n            title: 'English Grammar Fundamentals',\n            author: 'Dr. Sarah Johnson'\n          },\n          2: {\n            id: bookId,\n            title: 'Advanced English Composition',\n            author: 'Prof. Michael Chen'\n          },\n          11: {\n            id: bookId,\n            title: 'Master English: Complete Language Course',\n            author: 'Dr. Emily Rodriguez'\n          }\n        };\n        \n        const bookData = mockBookData[parseInt(bookId)] || mockBookData[1];\n        setBook(bookData);\n      }\n\n      if (chapterResponse.ok) {\n        const chapterData = await chapterResponse.json();\n        setChapter(chapterData);\n        \n        // If this is an English book, fetch the detailed sections\n        if (chapterData.book_title && chapterData.sections) {\n          // Set completed sections from reading progress if available\n          if (chapterData.reading_progress) {\n            setCompletedSections(chapterData.reading_progress.completed_sections || []);\n          }\n        }\n      } else if (chapterResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapter data due to authentication required');\n        \n        // Dynamic mock chapter data based on book ID and chapter ID\n        const mockChapterData = {\n          1: { // Book ID 1 - English Grammar Fundamentals\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'Basic Grammar Concepts',\n              description: 'Introduction to parts of speech and sentence structure in English.',\n              sections: [\n                {\n                  id: 1,\n                  kind: 'INTRODUCTION',\n                  title: 'Introduction to Grammar',\n                  content: {\n                    text: 'Welcome to Basic Grammar Concepts. This chapter will introduce you to the fundamental building blocks of English grammar.',\n                    overview: 'Learn the essential grammar concepts that form the foundation of English language.',\n                    key_concepts: ['Parts of speech', 'Sentence structure', 'Basic rules', 'Common patterns']\n                  }\n                },\n                {\n                  id: 2,\n                  kind: 'POINT_WISE_SUMMARY',\n                  title: 'Point-wise Summary',\n                  content: {\n                    points: [\n                      'Understanding parts of speech',\n                      'Learning sentence structure',\n                      'Mastering basic grammar rules',\n                      'Building vocabulary foundation'\n                    ],\n                    main_ideas: ['Grammar fundamentals', 'Language structure', 'Basic patterns']\n                  }\n                },\n                {\n                  id: 3,\n                  kind: 'SLOS',\n                  title: 'Student Learning Objectives',\n                  content: {\n                    objectives: [\n                      'Identify different parts of speech',\n                      'Understand basic sentence structure',\n                      'Apply grammar rules correctly',\n                      'Build confidence in English'\n                    ],\n                    outcomes: ['Knowledge of grammar', 'Improved writing', 'Better communication']\n                  }\n                },\n                {\n                  id: 4,\n                  kind: 'PRE_READING_QUESTIONS',\n                  title: 'Pre-reading Questions',\n                  content: {\n                    questions: [\n                      'What do you know about English grammar?',\n                      'How do you think grammar helps in communication?',\n                      'What grammar concepts do you find challenging?'\n                    ],\n                    purpose: 'These questions help prepare your mind for learning grammar concepts.'\n                  }\n                },\n                {\n                  id: 5,\n                  kind: 'VOCABULARY_TEXT_TRANSLATION',\n                  title: 'Vocabulary, Text & Translation',\n                  content: {\n                    vocabulary: {\n                      'grammar': 'The rules and structure of a language',\n                      'sentence': 'A group of words that express a complete thought',\n                      'structure': 'The way something is organized or arranged'\n                    },\n                    text: 'This section covers essential grammar concepts with examples and explanations.',\n                    translation: 'Key terms will be explained in simple language for better understanding.'\n                  }\n                },\n                {\n                  id: 6,\n                  kind: 'GLOSSARY',\n                  title: 'Glossary',\n                  content: {\n                    terms: {\n                      'grammar': 'The rules and structure of a language',\n                      'sentence': 'A group of words that express a complete thought',\n                      'structure': 'The way something is organized or arranged'\n                    },\n                    definitions: {\n                      'grammar': 'The system of rules that govern how words are used in a language',\n                      'sentence': 'A grammatical unit that contains a subject and predicate',\n                      'structure': 'The arrangement of and relations between the parts of something'\n                    }\n                  }\n                },\n                {\n                  id: 7,\n                  kind: 'EXERCISE_SHORT_QUESTIONS',\n                  title: 'Exercise: Short Questions',\n                  content: {\n                    questions: [\n                      'What are the main parts of speech?',\n                      'How does sentence structure work?',\n                      'Why is grammar important?'\n                    ],\n                    answers: {\n                      'What are the main parts of speech?': 'Nouns, verbs, adjectives, adverbs, pronouns, prepositions, conjunctions, interjections',\n                      'How does sentence structure work?': 'A sentence typically has a subject and predicate',\n                      'Why is grammar important?': 'Grammar helps us communicate clearly and effectively'\n                    }\n                  }\n                },\n                {\n                  id: 8,\n                  kind: 'EXERCISE_OBJECTIVES',\n                  title: 'Exercise: Objectives',\n                  content: {\n                    questions: [\n                      {\n                        question: 'Which of the following is NOT a part of speech?',\n                        options: ['Noun', 'Verb', 'Sentence', 'Adjective'],\n                        correct_answer: 'Sentence'\n                      },\n                      {\n                        question: 'True or False: Grammar is not important for communication.',\n                        options: ['True', 'False'],\n                        correct_answer: 'False'\n                      }\n                    ],\n                    options: {},\n                    correct_answers: {}\n                  }\n                },\n                {\n                  id: 9,\n                  kind: 'EXERCISE_VOCABULARY_GRAMMAR',\n                  title: 'Exercise: Vocabulary and Grammar',\n                  content: {\n                    vocabulary_exercises: [\n                      'Match words with their definitions',\n                      'Fill in the blanks with correct words',\n                      'Identify parts of speech'\n                    ],\n                    grammar_exercises: [\n                      'Correct grammar errors',\n                      'Complete sentences',\n                      'Identify sentence structure'\n                    ]\n                  }\n                },\n                {\n                  id: 10,\n                  kind: 'EXERCISE_ORAL_COMMUNICATION',\n                  title: 'Exercise: Oral Communication',\n                  content: {\n                    speaking_activities: [\n                      'Practice pronunciation of grammar terms',\n                      'Discuss grammar concepts with classmates',\n                      'Explain grammar rules to others'\n                    ],\n                    discussion_topics: [\n                      'How does grammar help in speaking?',\n                      'What grammar mistakes do you commonly make?',\n                      'How can we improve our grammar?'\n                    ]\n                  }\n                },\n                {\n                  id: 11,\n                  kind: 'EXERCISE_WRITING_SKILLS',\n                  title: 'Exercise: Writing Skills',\n                  content: {\n                    writing_prompts: [\n                      'Write about your experience learning grammar',\n                      'Create sentences using different parts of speech',\n                      'Explain a grammar rule in your own words'\n                    ],\n                    writing_tasks: [\n                      'Grammar practice exercises',\n                      'Sentence construction practice',\n                      'Grammar rule explanations'\n                    ]\n                  }\n                },\n                {\n                  id: 12,\n                  kind: 'IDIOMS_PHRASAL_VERBS',\n                  title: 'Idioms and Phrasal Verbs of the Lesson',\n                  content: {\n                    idioms: {\n                      'get the hang of': 'To learn how to do something',\n                      'piece of cake': 'Something very easy',\n                      'hit the books': 'To study hard'\n                    },\n                    phrasal_verbs: {\n                      'look up': 'To search for information',\n                      'figure out': 'To understand or solve',\n                      'catch on': 'To understand or learn'\n                    }\n                  }\n                },\n                {\n                  id: 13,\n                  kind: 'ASSESSMENT_TEST',\n                  title: 'Assessment Test',\n                  content: {\n                    questions: [\n                      {\n                        question: 'What is the main purpose of this chapter?',\n                        type: 'multiple_choice',\n                        options: ['To memorize vocabulary', 'To understand grammar basics', 'To pass an exam', 'To complete homework'],\n                        correct_answer: 'To understand grammar basics',\n                        marks: 10\n                      },\n                      {\n                        question: 'Explain how grammar helps in communication.',\n                        type: 'short_answer',\n                        marks: 15\n                      }\n                    ],\n                    time_limit: '30 minutes',\n                    total_marks: 100\n                  }\n                }\n              ]\n            }\n          },\n          2: { // Book ID 2 - Advanced English Composition\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'Essay Writing Fundamentals',\n              description: 'Learn the basics of essay structure and organization.',\n              sections: [\n                // Similar structure with 13 sections for essay writing\n                {\n                  id: 1,\n                  kind: 'INTRODUCTION',\n                  title: 'Introduction to Essay Writing',\n                  content: {\n                    text: 'Welcome to Essay Writing Fundamentals. This chapter will teach you how to write clear, organized essays.',\n                    overview: 'Learn the essential elements of essay writing and structure.',\n                    key_concepts: ['Essay structure', 'Organization', 'Clear writing', 'Logical flow']\n                  }\n                }\n                // ... other 12 sections would be added here\n              ]\n            }\n          },\n          11: { // Book ID 11 - Master English: Complete Language Course\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'English Fundamentals: Building Strong Foundations',\n              description: 'Master the basics of English grammar and vocabulary.',\n              sections: [\n                // Similar structure with 13 sections for comprehensive English\n                {\n                  id: 1,\n                  kind: 'INTRODUCTION',\n                  title: 'Introduction to English Fundamentals',\n                  content: {\n                    text: 'Welcome to English Fundamentals. This comprehensive chapter covers all essential aspects of English language learning.',\n                    overview: 'Build a strong foundation in English with grammar, vocabulary, and communication skills.',\n                    key_concepts: ['Grammar basics', 'Vocabulary building', 'Communication skills', 'Practical application']\n                  }\n                }\n                // ... other 12 sections would be added here\n              ]\n            }\n          }\n        };\n        \n        // Get the appropriate chapter data based on book ID and chapter ID\n        const bookChapters = mockChapterData[parseInt(bookId)] || {};\n        const chapterData = bookChapters[parseInt(chapterId)] || bookChapters[1] || {\n          id: chapterId,\n          title: 'English Language Learning',\n          description: 'Learn English fundamentals and communication skills.',\n          sections: []\n        };\n        \n        setChapter(chapterData);\n      } else if (chaptersResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapters data due to authentication required');\n        \n        // Dynamic mock chapters data based on book ID\n        const mockChaptersData = {\n          1: [ // English Grammar Fundamentals\n            {\n              id: 1,\n              title: 'Basic Grammar Concepts',\n              description: 'Introduction to parts of speech and sentence structure',\n              duration: '4 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            },\n            {\n              id: 2,\n              title: 'Essential Vocabulary Building',\n              description: 'Building a strong foundation of English vocabulary',\n              duration: '3 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            }\n          ],\n          2: [ // Advanced English Composition\n            {\n              id: 1,\n              title: 'Essay Writing Fundamentals',\n              description: 'Learn the basics of essay structure and organization',\n              duration: '5 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            },\n            {\n              id: 2,\n              title: 'Advanced Writing Techniques',\n              description: 'Master sophisticated writing styles and techniques',\n              duration: '6 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            }\n          ],\n          11: [ // Master English: Complete Language Course\n            {\n              id: 1,\n              title: 'English Fundamentals: Building Strong Foundations',\n              description: 'Master the basics of English grammar and vocabulary',\n              duration: '6 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            },\n            {\n              id: 2,\n              title: 'Effective Communication: Speaking with Confidence',\n              description: 'Develop your speaking and listening skills',\n              duration: '8 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            },\n            {\n              id: 3,\n              title: 'Advanced Writing: Expressing Ideas Clearly',\n              description: 'Learn to write clearly and persuasively',\n              duration: '10 hours',\n              sections_count: 13,\n              is_completed: false,\n              progress: 0\n            }\n          ]\n        };\n        \n        // Use the appropriate chapters data based on book ID, or default to first book\n        const chaptersData = mockChaptersData[parseInt(bookId)] || mockChaptersData[1];\n        setChapters(chaptersData);\n      }\n\n      // Mock data for development if no data was loaded\n      if (!book) {\n        const mockBookData = {\n          1: {\n            id: bookId,\n            title: 'English Grammar Fundamentals',\n            author: 'Dr. Sarah Johnson'\n          },\n          2: {\n            id: bookId,\n            title: 'Advanced English Composition',\n            author: 'Prof. Michael Chen'\n          },\n          11: {\n            id: bookId,\n            title: 'Master English: Complete Language Course',\n            author: 'Dr. Emily Rodriguez'\n          }\n        };\n        \n        const bookData = mockBookData[parseInt(bookId)] || mockBookData[1];\n        setBook(bookData);\n      }\n\n      if (!chapter) {\n        const mockChapterData = {\n          1: { // Book ID 1\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'Basic Grammar Concepts',\n              description: 'Introduction to parts of speech and sentence structure in English.',\n              sections: []\n            }\n          },\n          2: { // Book ID 2\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'Essay Writing Fundamentals',\n              description: 'Learn the basics of essay structure and organization.',\n              sections: []\n            }\n          },\n          11: { // Book ID 11\n            1: { // Chapter 1\n              id: chapterId,\n              title: 'English Fundamentals: Building Strong Foundations',\n              description: 'Master the basics of English grammar and vocabulary.',\n              sections: []\n            }\n          }\n        };\n        \n        const bookChapters = mockChapterData[parseInt(bookId)] || {};\n        const chapterData = bookChapters[parseInt(chapterId)] || bookChapters[1] || {\n          id: chapterId,\n          title: 'English Language Learning',\n          description: 'Learn English fundamentals and communication skills.',\n          sections: []\n        };\n        \n        setChapter(chapterData);\n      }\n\n      if (chapters.length === 0) {\n        setChapters([\n          { id: 1, title: 'Introduction to Advanced Calculus' },\n          { id: 2, title: 'Limits and Continuity' },\n          { id: 3, title: 'Differentiation Techniques' },\n          { id: 4, title: 'Integration Methods' }\n        ]);\n      }\n\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      toast.error('Failed to load chapter content');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const currentChapterIndex = chapters.findIndex(ch => ch.id === parseInt(chapterId));\n  const hasPreviousChapter = currentChapterIndex > 0;\n  const hasNextChapter = currentChapterIndex < chapters.length - 1;\n\n  const navigateToChapter = (direction) => {\n    if (direction === 'prev' && hasPreviousChapter) {\n      const prevChapter = chapters[currentChapterIndex - 1];\n      navigate(`/app/library/${bookId}/chapter/${prevChapter.id}`);\n    } else if (direction === 'next' && hasNextChapter) {\n      const nextChapter = chapters[currentChapterIndex + 1];\n      navigate(`/app/library/${bookId}/chapter/${nextChapter.id}`);\n    }\n  };\n\n  const handleSectionComplete = (sectionId, sectionIndex) => {\n    // Add section to completed sections\n    if (!completedSections.includes(sectionId)) {\n      setCompletedSections(prev => [...prev, sectionId]);\n      \n      // Progress is now calculated dynamically from completedSections\n      \n      // Auto-expand next section if available\n      if (sectionIndex < chapter.sections.length - 1) {\n        setCurrentSection(sectionIndex + 1);\n      }\n      \n      toast.success('Section completed!');\n    }\n  };\n\n  const toggleAudio = () => {\n    setIsPlaying(!isPlaying);\n    // TODO: Implement actual audio playback\n    toast.success(isPlaying ? 'Audio paused' : 'Audio playing');\n  };\n\n  const toggleMute = () => {\n    setIsMuted(!isMuted);\n    // TODO: Implement actual mute functionality\n    toast.success(isMuted ? 'Audio unmuted' : 'Audio muted');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading chapter...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!chapter || !book) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <BookOpenIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Chapter not found</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            The chapter you're looking for doesn't exist.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                to={`/app/library/${bookId}`}\n                className=\"text-indigo-600 hover:text-indigo-500 flex items-center\"\n              >\n                <ChevronLeftIcon className=\"h-5 w-5 mr-1\" />\n                Back to Book\n              </Link>\n              <span className=\"text-gray-400\">/</span>\n              <span className=\"text-gray-600\">{chapter.title}</span>\n            </div>\n            \n            {/* Audio Controls */}\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={toggleAudio}\n                className=\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\"\n              >\n                {isPlaying ? (\n                  <PauseIcon className=\"h-5 w-5 text-gray-600\" />\n                ) : (\n                  <PlayIcon className=\"h-5 w-5 text-gray-600\" />\n                )}\n              </button>\n              <button\n                onClick={toggleMute}\n                className=\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\"\n              >\n                {isMuted ? (\n                  <SpeakerXMarkIcon className=\"h-5 w-5 text-gray-600\" />\n                ) : (\n                  <SpeakerWaveIcon className=\"h-5 w-5 text-gray-600\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-3\">\n            {/* Chapter Header */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                    {chapter.title}\n                  </h1>\n                  <p className=\"text-gray-600\">{chapter.description}</p>\n                </div>\n                              <div className=\"text-right\">\n                <div className=\"text-sm text-gray-500\">Progress</div>\n                <div className=\"text-2xl font-bold text-indigo-600\">\n                  {Math.round((completedSections.length / (chapter.sections?.length || 1)) * 100)}%\n                </div>\n              </div>\n              </div>\n              \n              {/* Progress Bar */}\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-indigo-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${(completedSections.length / (chapter.sections?.length || 1)) * 100}%` }}\n                ></div>\n              </div>\n            </div>\n\n            {/* Chapter Content */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n              <ChapterSections \n                sections={chapter.sections || []}\n                onSectionComplete={handleSectionComplete}\n                completedSections={completedSections}\n              />\n            </div>\n\n            {/* Navigation */}\n            <div className=\"flex items-center justify-between\">\n              <button\n                onClick={() => navigateToChapter('prev')}\n                disabled={!hasPreviousChapter}\n                className=\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <ChevronLeftIcon className=\"h-5 w-5 mr-2\" />\n                Previous Chapter\n              </button>\n              \n              <button\n                onClick={() => navigateToChapter('next')}\n                disabled={!hasNextChapter}\n                className=\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Next Chapter\n                <ChevronRightIcon className=\"h-5 w-5 ml-2\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Chapter Navigation */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Chapter Sections</h3>\n              <div className=\"space-y-2\">\n                {chapter.sections?.map((section, index) => {\n                  const isCompleted = completedSections.includes(section.id);\n                  const isCurrent = index === currentSection;\n                  \n                  return (\n                    <button\n                      key={section.id}\n                      onClick={() => setCurrentSection(index)}\n                      className={`w-full text-left p-3 rounded-md transition-colors duration-200 ${\n                        isCurrent\n                          ? 'bg-indigo-100 text-indigo-700 border border-indigo-200'\n                          : isCompleted\n                          ? 'bg-green-50 text-green-700 border border-green-200'\n                          : 'hover:bg-gray-50 text-gray-700'\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm font-medium\">\n                          {section.kind ? section.kind.replace('_', ' ') : section.title}\n                        </span>\n                        {isCompleted && (\n                          <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />\n                        )}\n                      </div>\n                      <div className=\"flex items-center mt-1 text-xs text-gray-500\">\n                        <DocumentTextIcon className=\"h-4 w-4 mr-1\" />\n                        Section {index + 1} of {chapter.sections.length}\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Notes */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">My Notes</h3>\n                <button\n                  onClick={() => setShowNotes(!showNotes)}\n                  className=\"text-indigo-600 hover:text-indigo-500 text-sm\"\n                >\n                  {showNotes ? 'Hide' : 'Show'}\n                </button>\n              </div>\n              \n              {showNotes && (\n                <div>\n                  <textarea\n                    value={userNotes}\n                    onChange={(e) => setUserNotes(e.target.value)}\n                    placeholder=\"Add your notes here...\"\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                    rows={4}\n                  />\n                  <button className=\"mt-2 w-full bg-indigo-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors duration-200\">\n                    Save Notes\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quick Actions</h3>\n              <div className=\"space-y-3\">\n                <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\">\n                  <LightBulbIcon className=\"h-5 w-5 mr-2\" />\n                  Ask AI Assistant\n                </button>\n                <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\">\n                  <AcademicCapIcon className=\"h-5 w-5 mr-2\" />\n                  Take Quiz\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChapterViewerPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{ChevronLeftIcon,ChevronRightIcon,BookOpenIcon,CheckCircleIcon,PlayIcon,PauseIcon,SpeakerWaveIcon,SpeakerXMarkIcon,DocumentTextIcon,AcademicCapIcon,LightBulbIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import{API_ENDPOINTS}from'../../config/api';import ChapterSections from'../../components/library/ChapterSections';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChapterViewerPage=()=>{var _chapter$sections,_chapter$sections2,_chapter$sections3;const{bookId,chapterId}=useParams();const navigate=useNavigate();const[book,setBook]=useState(null);const[chapter,setChapter]=useState(null);const[chapters,setChapters]=useState([]);const[currentSection,setCurrentSection]=useState(0);const[isLoading,setIsLoading]=useState(true);const[isPlaying,setIsPlaying]=useState(false);const[isMuted,setIsMuted]=useState(false);const[showNotes,setShowNotes]=useState(false);const[userNotes,setUserNotes]=useState('');const[completedSections,setCompletedSections]=useState([]);useEffect(()=>{fetchBookAndChapter();},[bookId,chapterId]);const fetchBookAndChapter=async()=>{try{// Get auth token from localStorage\nconst tokens=JSON.parse(localStorage.getItem('tokens')||'{}');const headers={'Content-Type':'application/json'};if(tokens.access){headers['Authorization']=\"Bearer \".concat(tokens.access);}const[bookResponse,chapterResponse,chaptersResponse]=await Promise.all([fetch(\"\".concat(API_ENDPOINTS.BOOKS).concat(bookId,\"/\"),{headers}),fetch(\"\".concat(API_ENDPOINTS.BOOKS).concat(bookId,\"/chapters/\").concat(chapterId,\"/\"),{headers}),fetch(\"\".concat(API_ENDPOINTS.BOOKS).concat(bookId,\"/chapters/\"),{headers})]);if(bookResponse.ok){const bookData=await bookResponse.json();setBook(bookData);}else if(bookResponse.status===401){// If unauthorized, show mock data for development\nconsole.log('Using mock book data due to authentication required');setBook({id:bookId,title:'Advanced Mathematics',author:'Dr. Sarah Johnson'});}if(chapterResponse.ok){const chapterData=await chapterResponse.json();setChapter(chapterData);// If this is an English book, fetch the detailed sections\nif(chapterData.book_title&&chapterData.sections){// Set completed sections from reading progress if available\nif(chapterData.reading_progress){setCompletedSections(chapterData.reading_progress.completed_sections||[]);}}}else if(chapterResponse.status===401){// If unauthorized, show mock data for development\nconsole.log('Using mock chapter data due to authentication required');setChapter({id:chapterId,title:'The Art of Effective Communication',description:'Learn the principles of effective communication in English, covering both verbal and non-verbal aspects.',sections:[{id:1,kind:'INTRODUCTION',title:'Understanding Communication',content:{text:'Communication is the foundation of human interaction. This chapter explores the principles of effective communication in English, covering both verbal and non-verbal aspects.',key_concepts:['Verbal communication','Non-verbal cues','Active listening','Clear expression'],overview:'Learn how to express yourself clearly, listen actively, and understand the nuances of English communication.'}},{id:2,kind:'SLOS',title:'Student Learning Objectives',content:{objectives:['Define effective communication and its components','Identify barriers to effective communication','Apply active listening techniques in conversations','Use appropriate non-verbal communication cues']}}]});}if(chaptersResponse.ok){const chaptersData=await chaptersResponse.json();setChapters(chaptersData.results||[]);}else if(chaptersResponse.status===401){// If unauthorized, show mock data for development\nconsole.log('Using mock chapters data due to authentication required');setChapters([{id:1,title:'Introduction to Advanced Calculus',description:'Overview of calculus concepts and mathematical foundations',duration:'6 hours',sections_count:8,is_completed:false,progress:0}]);}// Mock data for development if no data was loaded\nif(!book){setBook({id:bookId,title:'Advanced Mathematics',author:'Dr. Sarah Johnson'});}if(!chapter){setChapter({id:chapterId,title:'Introduction to Advanced Calculus',description:'Overview of calculus concepts and mathematical foundations',duration:'6 hours',sections:[{id:1,title:'What is Calculus?',content:'Calculus is a branch of mathematics that deals with continuous change. It provides a framework for modeling systems in which there is change, and a way to deduce the predictions of such models.',type:'text',duration:'15 min'},{id:2,title:'Historical Development',content:'The development of calculus was motivated by the need to solve problems in physics and astronomy. Isaac Newton and Gottfried Leibniz are credited with independently developing calculus in the late 17th century.',type:'text',duration:'20 min'},{id:3,title:'Key Concepts',content:'The two main branches of calculus are differential calculus and integral calculus. Differential calculus concerns the rate of change of quantities, while integral calculus concerns the accumulation of quantities.',type:'text',duration:'25 min'},{id:4,title:'Interactive Example',content:'Let\\'s explore a simple example: finding the slope of a curve at a point. This is one of the fundamental problems that calculus solves.',type:'interactive',duration:'30 min'}]});}if(chapters.length===0){setChapters([{id:1,title:'Introduction to Advanced Calculus'},{id:2,title:'Limits and Continuity'},{id:3,title:'Differentiation Techniques'},{id:4,title:'Integration Methods'}]);}}catch(error){console.error('Error fetching data:',error);toast.error('Failed to load chapter content');}finally{setIsLoading(false);}};const currentChapterIndex=chapters.findIndex(ch=>ch.id===parseInt(chapterId));const hasPreviousChapter=currentChapterIndex>0;const hasNextChapter=currentChapterIndex<chapters.length-1;const navigateToChapter=direction=>{if(direction==='prev'&&hasPreviousChapter){const prevChapter=chapters[currentChapterIndex-1];navigate(\"/app/library/\".concat(bookId,\"/chapter/\").concat(prevChapter.id));}else if(direction==='next'&&hasNextChapter){const nextChapter=chapters[currentChapterIndex+1];navigate(\"/app/library/\".concat(bookId,\"/chapter/\").concat(nextChapter.id));}};const handleSectionComplete=(sectionId,sectionIndex)=>{// Add section to completed sections\nif(!completedSections.includes(sectionId)){setCompletedSections(prev=>[...prev,sectionId]);// Progress is now calculated dynamically from completedSections\n// Auto-expand next section if available\nif(sectionIndex<chapter.sections.length-1){setCurrentSection(sectionIndex+1);}toast.success('Section completed!');}};const toggleAudio=()=>{setIsPlaying(!isPlaying);// TODO: Implement actual audio playback\ntoast.success(isPlaying?'Audio paused':'Audio playing');};const toggleMute=()=>{setIsMuted(!isMuted);// TODO: Implement actual mute functionality\ntoast.success(isMuted?'Audio unmuted':'Audio muted');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading chapter...\"})]})});}if(!chapter||!book){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Chapter not found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"The chapter you're looking for doesn't exist.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/app/library/\".concat(bookId),className:\"text-indigo-600 hover:text-indigo-500 flex items-center\",children:[/*#__PURE__*/_jsx(ChevronLeftIcon,{className:\"h-5 w-5 mr-1\"}),\"Back to Book\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:chapter.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleAudio,className:\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\",children:isPlaying?/*#__PURE__*/_jsx(PauseIcon,{className:\"h-5 w-5 text-gray-600\"}):/*#__PURE__*/_jsx(PlayIcon,{className:\"h-5 w-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleMute,className:\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\",children:isMuted?/*#__PURE__*/_jsx(SpeakerXMarkIcon,{className:\"h-5 w-5 text-gray-600\"}):/*#__PURE__*/_jsx(SpeakerWaveIcon,{className:\"h-5 w-5 text-gray-600\"})})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:chapter.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:chapter.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Progress\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-indigo-600\",children:[Math.round(completedSections.length/(((_chapter$sections=chapter.sections)===null||_chapter$sections===void 0?void 0:_chapter$sections.length)||1)*100),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-indigo-600 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(completedSections.length/(((_chapter$sections2=chapter.sections)===null||_chapter$sections2===void 0?void 0:_chapter$sections2.length)||1)*100,\"%\")}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\",children:/*#__PURE__*/_jsx(ChapterSections,{sections:chapter.sections||[],onSectionComplete:handleSectionComplete,completedSections:completedSections})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigateToChapter('prev'),disabled:!hasPreviousChapter,className:\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(ChevronLeftIcon,{className:\"h-5 w-5 mr-2\"}),\"Previous Chapter\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigateToChapter('next'),disabled:!hasNextChapter,className:\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",children:[\"Next Chapter\",/*#__PURE__*/_jsx(ChevronRightIcon,{className:\"h-5 w-5 ml-2\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Chapter Sections\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:(_chapter$sections3=chapter.sections)===null||_chapter$sections3===void 0?void 0:_chapter$sections3.map((section,index)=>{const isCompleted=completedSections.includes(section.id);const isCurrent=index===currentSection;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentSection(index),className:\"w-full text-left p-3 rounded-md transition-colors duration-200 \".concat(isCurrent?'bg-indigo-100 text-indigo-700 border border-indigo-200':isCompleted?'bg-green-50 text-green-700 border border-green-200':'hover:bg-gray-50 text-gray-700'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:section.kind?section.kind.replace('_',' '):section.title}),isCompleted&&/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-4 w-4 mr-1\"}),\"Section \",index+1,\" of \",chapter.sections.length]})]},section.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"My Notes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNotes(!showNotes),className:\"text-indigo-600 hover:text-indigo-500 text-sm\",children:showNotes?'Hide':'Show'})]}),showNotes&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{value:userNotes,onChange:e=>setUserNotes(e.target.value),placeholder:\"Add your notes here...\",className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\",rows:4}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 w-full bg-indigo-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors duration-200\",children:\"Save Notes\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(LightBulbIcon,{className:\"h-5 w-5 mr-2\"}),\"Ask AI Assistant\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(AcademicCapIcon,{className:\"h-5 w-5 mr-2\"}),\"Take Quiz\"]})]})]})]})]})})]});};export default ChapterViewerPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","ChevronLeftIcon","ChevronRightIcon","BookOpenIcon","CheckCircleIcon","PlayIcon","PauseIcon","SpeakerWaveIcon","SpeakerXMarkIcon","DocumentTextIcon","AcademicCapIcon","LightBulbIcon","toast","API_ENDPOINTS","ChapterSections","jsx","_jsx","jsxs","_jsxs","ChapterViewerPage","_chapter$sections","_chapter$sections2","_chapter$sections3","bookId","chapterId","navigate","book","setBook","chapter","setChapter","chapters","setChapters","currentSection","setCurrentSection","isLoading","setIsLoading","isPlaying","setIsPlaying","isMuted","setIsMuted","showNotes","setShowNotes","userNotes","setUserNotes","completedSections","setCompletedSections","fetchBookAndChapter","tokens","JSON","parse","localStorage","getItem","headers","access","concat","bookResponse","chapterResponse","chaptersResponse","Promise","all","fetch","BOOKS","ok","bookData","json","status","console","log","id","title","author","chapterData","book_title","sections","reading_progress","completed_sections","description","kind","content","text","key_concepts","overview","objectives","chaptersData","results","duration","sections_count","is_completed","progress","type","length","error","currentChapterIndex","findIndex","ch","parseInt","hasPreviousChapter","hasNextChapter","navigateToChapter","direction","prevChapter","nextChapter","handleSectionComplete","sectionId","sectionIndex","includes","prev","success","toggleAudio","toggleMute","className","children","to","onClick","Math","round","style","width","onSectionComplete","disabled","map","section","index","isCompleted","isCurrent","replace","value","onChange","e","target","placeholder","rows"],"sources":["/home/shahzad/Desktop/Book_Project/ilm-kademy-frontend/src/pages/library/ChapterViewerPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { \n  ChevronLeftIcon, \n  ChevronRightIcon, \n  BookOpenIcon,\n  CheckCircleIcon,\n  PlayIcon,\n  PauseIcon,\n  SpeakerWaveIcon,\n  SpeakerXMarkIcon,\n  DocumentTextIcon,\n  AcademicCapIcon,\n  LightBulbIcon\n} from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { API_ENDPOINTS } from '../../config/api';\nimport ChapterSections from '../../components/library/ChapterSections';\n\nconst ChapterViewerPage = () => {\n  const { bookId, chapterId } = useParams();\n  const navigate = useNavigate();\n  const [book, setBook] = useState(null);\n  const [chapter, setChapter] = useState(null);\n  const [chapters, setChapters] = useState([]);\n  const [currentSection, setCurrentSection] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n\n  const [showNotes, setShowNotes] = useState(false);\n  const [userNotes, setUserNotes] = useState('');\n  const [completedSections, setCompletedSections] = useState([]);\n\n  useEffect(() => {\n    fetchBookAndChapter();\n  }, [bookId, chapterId]);\n\n  const fetchBookAndChapter = async () => {\n    try {\n      // Get auth token from localStorage\n      const tokens = JSON.parse(localStorage.getItem('tokens') || '{}');\n      const headers = {\n        'Content-Type': 'application/json',\n      };\n      \n      if (tokens.access) {\n        headers['Authorization'] = `Bearer ${tokens.access}`;\n      }\n\n      const [bookResponse, chapterResponse, chaptersResponse] = await Promise.all([\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/`, { headers }),\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/${chapterId}/`, { headers }),\n        fetch(`${API_ENDPOINTS.BOOKS}${bookId}/chapters/`, { headers })\n      ]);\n\n      if (bookResponse.ok) {\n        const bookData = await bookResponse.json();\n        setBook(bookData);\n      } else if (bookResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock book data due to authentication required');\n        setBook({\n          id: bookId,\n          title: 'Advanced Mathematics',\n          author: 'Dr. Sarah Johnson'\n        });\n      }\n\n      if (chapterResponse.ok) {\n        const chapterData = await chapterResponse.json();\n        setChapter(chapterData);\n        \n        // If this is an English book, fetch the detailed sections\n        if (chapterData.book_title && chapterData.sections) {\n          // Set completed sections from reading progress if available\n          if (chapterData.reading_progress) {\n            setCompletedSections(chapterData.reading_progress.completed_sections || []);\n          }\n        }\n      } else if (chapterResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapter data due to authentication required');\n        setChapter({\n          id: chapterId,\n          title: 'The Art of Effective Communication',\n          description: 'Learn the principles of effective communication in English, covering both verbal and non-verbal aspects.',\n          sections: [\n            {\n              id: 1,\n              kind: 'INTRODUCTION',\n              title: 'Understanding Communication',\n              content: {\n                text: 'Communication is the foundation of human interaction. This chapter explores the principles of effective communication in English, covering both verbal and non-verbal aspects.',\n                key_concepts: ['Verbal communication', 'Non-verbal cues', 'Active listening', 'Clear expression'],\n                overview: 'Learn how to express yourself clearly, listen actively, and understand the nuances of English communication.'\n              }\n            },\n            {\n              id: 2,\n              kind: 'SLOS',\n              title: 'Student Learning Objectives',\n              content: {\n                objectives: [\n                  'Define effective communication and its components',\n                  'Identify barriers to effective communication',\n                  'Apply active listening techniques in conversations',\n                  'Use appropriate non-verbal communication cues'\n                ]\n              }\n            }\n          ]\n        });\n      }\n\n      if (chaptersResponse.ok) {\n        const chaptersData = await chaptersResponse.json();\n        setChapters(chaptersData.results || []);\n      } else if (chaptersResponse.status === 401) {\n        // If unauthorized, show mock data for development\n        console.log('Using mock chapters data due to authentication required');\n        setChapters([\n          {\n            id: 1,\n            title: 'Introduction to Advanced Calculus',\n            description: 'Overview of calculus concepts and mathematical foundations',\n            duration: '6 hours',\n            sections_count: 8,\n            is_completed: false,\n            progress: 0\n          }\n        ]);\n      }\n\n      // Mock data for development if no data was loaded\n      if (!book) {\n        setBook({\n          id: bookId,\n          title: 'Advanced Mathematics',\n          author: 'Dr. Sarah Johnson'\n        });\n      }\n\n      if (!chapter) {\n        setChapter({\n          id: chapterId,\n          title: 'Introduction to Advanced Calculus',\n          description: 'Overview of calculus concepts and mathematical foundations',\n          duration: '6 hours',\n          sections: [\n            {\n              id: 1,\n              title: 'What is Calculus?',\n              content: 'Calculus is a branch of mathematics that deals with continuous change. It provides a framework for modeling systems in which there is change, and a way to deduce the predictions of such models.',\n              type: 'text',\n              duration: '15 min'\n            },\n            {\n              id: 2,\n              title: 'Historical Development',\n              content: 'The development of calculus was motivated by the need to solve problems in physics and astronomy. Isaac Newton and Gottfried Leibniz are credited with independently developing calculus in the late 17th century.',\n              type: 'text',\n              duration: '20 min'\n            },\n            {\n              id: 3,\n              title: 'Key Concepts',\n              content: 'The two main branches of calculus are differential calculus and integral calculus. Differential calculus concerns the rate of change of quantities, while integral calculus concerns the accumulation of quantities.',\n              type: 'text',\n              duration: '25 min'\n            },\n            {\n              id: 4,\n              title: 'Interactive Example',\n              content: 'Let\\'s explore a simple example: finding the slope of a curve at a point. This is one of the fundamental problems that calculus solves.',\n              type: 'interactive',\n              duration: '30 min'\n            }\n          ]\n        });\n      }\n\n      if (chapters.length === 0) {\n        setChapters([\n          { id: 1, title: 'Introduction to Advanced Calculus' },\n          { id: 2, title: 'Limits and Continuity' },\n          { id: 3, title: 'Differentiation Techniques' },\n          { id: 4, title: 'Integration Methods' }\n        ]);\n      }\n\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      toast.error('Failed to load chapter content');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const currentChapterIndex = chapters.findIndex(ch => ch.id === parseInt(chapterId));\n  const hasPreviousChapter = currentChapterIndex > 0;\n  const hasNextChapter = currentChapterIndex < chapters.length - 1;\n\n  const navigateToChapter = (direction) => {\n    if (direction === 'prev' && hasPreviousChapter) {\n      const prevChapter = chapters[currentChapterIndex - 1];\n      navigate(`/app/library/${bookId}/chapter/${prevChapter.id}`);\n    } else if (direction === 'next' && hasNextChapter) {\n      const nextChapter = chapters[currentChapterIndex + 1];\n      navigate(`/app/library/${bookId}/chapter/${nextChapter.id}`);\n    }\n  };\n\n  const handleSectionComplete = (sectionId, sectionIndex) => {\n    // Add section to completed sections\n    if (!completedSections.includes(sectionId)) {\n      setCompletedSections(prev => [...prev, sectionId]);\n      \n      // Progress is now calculated dynamically from completedSections\n      \n      // Auto-expand next section if available\n      if (sectionIndex < chapter.sections.length - 1) {\n        setCurrentSection(sectionIndex + 1);\n      }\n      \n      toast.success('Section completed!');\n    }\n  };\n\n  const toggleAudio = () => {\n    setIsPlaying(!isPlaying);\n    // TODO: Implement actual audio playback\n    toast.success(isPlaying ? 'Audio paused' : 'Audio playing');\n  };\n\n  const toggleMute = () => {\n    setIsMuted(!isMuted);\n    // TODO: Implement actual mute functionality\n    toast.success(isMuted ? 'Audio unmuted' : 'Audio muted');\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading chapter...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!chapter || !book) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <BookOpenIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Chapter not found</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            The chapter you're looking for doesn't exist.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                to={`/app/library/${bookId}`}\n                className=\"text-indigo-600 hover:text-indigo-500 flex items-center\"\n              >\n                <ChevronLeftIcon className=\"h-5 w-5 mr-1\" />\n                Back to Book\n              </Link>\n              <span className=\"text-gray-400\">/</span>\n              <span className=\"text-gray-600\">{chapter.title}</span>\n            </div>\n            \n            {/* Audio Controls */}\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={toggleAudio}\n                className=\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\"\n              >\n                {isPlaying ? (\n                  <PauseIcon className=\"h-5 w-5 text-gray-600\" />\n                ) : (\n                  <PlayIcon className=\"h-5 w-5 text-gray-600\" />\n                )}\n              </button>\n              <button\n                onClick={toggleMute}\n                className=\"p-2 rounded-full hover:bg-gray-100 transition-colors duration-200\"\n              >\n                {isMuted ? (\n                  <SpeakerXMarkIcon className=\"h-5 w-5 text-gray-600\" />\n                ) : (\n                  <SpeakerWaveIcon className=\"h-5 w-5 text-gray-600\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-3\">\n            {/* Chapter Header */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                    {chapter.title}\n                  </h1>\n                  <p className=\"text-gray-600\">{chapter.description}</p>\n                </div>\n                              <div className=\"text-right\">\n                <div className=\"text-sm text-gray-500\">Progress</div>\n                <div className=\"text-2xl font-bold text-indigo-600\">\n                  {Math.round((completedSections.length / (chapter.sections?.length || 1)) * 100)}%\n                </div>\n              </div>\n              </div>\n              \n              {/* Progress Bar */}\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-indigo-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${(completedSections.length / (chapter.sections?.length || 1)) * 100}%` }}\n                ></div>\n              </div>\n            </div>\n\n            {/* Chapter Content */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\n              <ChapterSections \n                sections={chapter.sections || []}\n                onSectionComplete={handleSectionComplete}\n                completedSections={completedSections}\n              />\n            </div>\n\n            {/* Navigation */}\n            <div className=\"flex items-center justify-between\">\n              <button\n                onClick={() => navigateToChapter('prev')}\n                disabled={!hasPreviousChapter}\n                className=\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <ChevronLeftIcon className=\"h-5 w-5 mr-2\" />\n                Previous Chapter\n              </button>\n              \n              <button\n                onClick={() => navigateToChapter('next')}\n                disabled={!hasNextChapter}\n                className=\"flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Next Chapter\n                <ChevronRightIcon className=\"h-5 w-5 ml-2\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Chapter Navigation */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Chapter Sections</h3>\n              <div className=\"space-y-2\">\n                {chapter.sections?.map((section, index) => {\n                  const isCompleted = completedSections.includes(section.id);\n                  const isCurrent = index === currentSection;\n                  \n                  return (\n                    <button\n                      key={section.id}\n                      onClick={() => setCurrentSection(index)}\n                      className={`w-full text-left p-3 rounded-md transition-colors duration-200 ${\n                        isCurrent\n                          ? 'bg-indigo-100 text-indigo-700 border border-indigo-200'\n                          : isCompleted\n                          ? 'bg-green-50 text-green-700 border border-green-200'\n                          : 'hover:bg-gray-50 text-gray-700'\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm font-medium\">\n                          {section.kind ? section.kind.replace('_', ' ') : section.title}\n                        </span>\n                        {isCompleted && (\n                          <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />\n                        )}\n                      </div>\n                      <div className=\"flex items-center mt-1 text-xs text-gray-500\">\n                        <DocumentTextIcon className=\"h-4 w-4 mr-1\" />\n                        Section {index + 1} of {chapter.sections.length}\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Notes */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">My Notes</h3>\n                <button\n                  onClick={() => setShowNotes(!showNotes)}\n                  className=\"text-indigo-600 hover:text-indigo-500 text-sm\"\n                >\n                  {showNotes ? 'Hide' : 'Show'}\n                </button>\n              </div>\n              \n              {showNotes && (\n                <div>\n                  <textarea\n                    value={userNotes}\n                    onChange={(e) => setUserNotes(e.target.value)}\n                    placeholder=\"Add your notes here...\"\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n                    rows={4}\n                  />\n                  <button className=\"mt-2 w-full bg-indigo-600 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors duration-200\">\n                    Save Notes\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quick Actions</h3>\n              <div className=\"space-y-3\">\n                <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\">\n                  <LightBulbIcon className=\"h-5 w-5 mr-2\" />\n                  Ask AI Assistant\n                </button>\n                <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200\">\n                  <AcademicCapIcon className=\"h-5 w-5 mr-2\" />\n                  Take Quiz\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChapterViewerPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}